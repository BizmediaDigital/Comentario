"use strict";(self.webpackChunk_dhis2_app_shell=self.webpackChunk_dhis2_app_shell||[]).push([[3524],{9815:function(e,a,t){t.r(a),t.d(a,{default:function(){return E}});var n=t(5043),l=t(4323),s=t.n(l),o=t(8243),r=t(1218),i=t(3002),c=t(9300),m=t(3792),u=t(402),d=t(7047),p=(t(1636),t(5316));var E=function(){const[e,a]=(0,n.useState)([]);(0,n.useEffect)((()=>{(async()=>{const e="http://129.151.190.136:8080/api/",t={fields:"*,comments[id,text,user,visualization[id,name]]"},n=`${e}interpretations`;try{const l=await s().get(n,{params:t,withCredentials:!0});if(200===l.status){const t=l.data.interpretations||[],n=await Promise.all(t.map((async a=>{var t;const n=null===(t=a.visualization)||void 0===t?void 0:t.id;if(n){const t=`${e}visualizations/${n}`;try{const e=await s().get(t,{withCredentials:!0});200===e.status?a.visualizationName=e.data.name||"N/A":console.log(`Erro na segunda consulta: ${e.status}`)}catch(l){console.error(`Erro na segunda requisi\xe7\xe3o: ${l.message}`)}}return a})));a(n)}else console.log(`Erro na solicita\xe7\xe3o: ${l.status}`)}catch(l){console.error(`Erro na requisi\xe7\xe3o: ${l.message}`)}})()}),[]);const t=async a=>{if("pdf"===a){const a=new d.jsPDF,t=["Gr\xe1fico/Tabela","Nome Tabela/Gr\xe1fico","Usu\xe1rio","Coment\xe1rio"],n=e.map((e=>{var a;return[e.type||"N/A",e.visualizationName||"N/A",(null===(a=e.user)||void 0===a?void 0:a.displayName)||"N/A",e.text||"N/A"]}));a.autoTable({head:[t],body:n}),a.save("tabela.pdf")}else if("image"===a){const e=document.querySelector(".custom-table");e&&(0,p.$E)(e).then((e=>{const a=document.createElement("a");a.download="table-image.png",a.href=e,a.click()})).catch((e=>{console.error("Falha ao baixar a imagem:",e)}))}};return n.createElement("div",{className:"app-container"},n.createElement(o.X,{className:"custom-table"},n.createElement(r.n,null,n.createElement(i.H,null,n.createElement(c.n,{className:"bold-cell"},"Gr\xe1fico/Tabela"),n.createElement(c.n,{className:"bold-cell"},"Nome Tabela/Gr\xe1fico"),n.createElement(c.n,{className:"bold-cell"},"Usu\xe1rio"),n.createElement(c.n,{className:"bold-cell"},"Coment\xe1rio"))),n.createElement(m.B,null,e.map(((e,a)=>{var t;return n.createElement(i.H,{key:a},n.createElement(c.n,null,e.type||"N/A"),n.createElement(c.n,null,e.visualizationName||"N/A"),n.createElement(c.n,null,(null===(t=e.user)||void 0===t?void 0:t.displayName)||"N/A"),n.createElement(c.n,null,e.text||"N/A"))})))),n.createElement(u.$,{onClick:()=>t("pdf"),primary:!0},"Baixar como PDF"),n.createElement(u.$,{onClick:()=>t("image"),primary:!0},"Baixar como Imagem"))}}}]);
//# sourceMappingURL=app.cc8119f5.chunk.js.map